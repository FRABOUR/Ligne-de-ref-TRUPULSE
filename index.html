function degToRad(value, unit) {
  if (unit === "deg") {
    return value * Math.PI / 180;
  } else if (unit === "grad") {
    return value * Math.PI / 200;
  } else {
    throw new Error("Unité inconnue");
  }
}

// Selon certains systèmes de coordonnées, l'angle 0 est en haut (axe Y positif),
// donc x = distance * sin(angle) et y = distance * cos(angle).
// Testons cette variante :

function polarToCartesianX(angle, distance, unit) {
  return distance * Math.sin(degToRad(angle, unit));
}

function polarToCartesianY(angle, distance, unit) {
  return distance * Math.cos(degToRad(angle, unit));
}

// Le reste reste identique

const unit = "grad";

const A = { angle: 327.12, dist: 151.11 };
const B = { angle: 39.03, dist: 24.36 };
const C = { angle: 7.15, dist: 52.54 };

const xA = polarToCartesianX(A.angle, A.dist, unit);
const yA = polarToCartesianY(A.angle, A.dist, unit);
const xB = polarToCartesianX(B.angle, B.dist, unit);
const yB = polarToCartesianY(B.angle, B.dist, unit);
const xC = polarToCartesianX(C.angle, C.dist, unit);
const yC = polarToCartesianY(C.angle, C.dist, unit);

const numerator = Math.abs((yB - yA) * xC - (xB - xA) * yC + xB * yA - yB * xA);
const denominator = Math.sqrt(Math.pow(yB - yA, 2) + Math.pow(xB - xA, 2));
const distance = numerator / denominator;

console.log("Distance =", distance.toFixed(2), "m");

